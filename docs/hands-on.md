author: hands-on-mcp
summary: TypeScript ã§ MCP ã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã‚‹ãƒãƒ³ã‚ºã‚ªãƒ³
id: hands-on-mcp
categories: mcp,typescript,slack
environments: Web
status: Published
feedback link: https://github.com/7tsuno/hands-on-mcp/issues
analytics account:

# MCP Server ãƒãƒ³ã‚ºã‚ªãƒ³

## ã¯ã˜ã‚ã«

Duration: 0:02:00

### ğŸ¯ ã“ã®ãƒãƒ³ã‚ºã‚ªãƒ³ã«ã¤ã„ã¦

Model Context Protocol (MCP) ã‚µãƒ¼ãƒãƒ¼ã‚’åˆã‚ã¦ä½œã‚‹æ–¹ã®ãŸã‚ã®ãƒãƒ³ã‚ºã‚ªãƒ³ã§ã™ã€‚
TypeScript ã‚’ä½¿ã£ã¦ã€å®Ÿéš›ã«å‹•ä½œã™ã‚‹ MCP ã‚µãƒ¼ãƒãƒ¼ã‚’ä¸€ã‹ã‚‰æ§‹ç¯‰ã—ã¦ã„ãã¾ã™ã€‚

### ğŸ“š å­¦ç¿’å†…å®¹

ã“ã®ãƒãƒ³ã‚ºã‚ªãƒ³ã¯ 2 ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ï¼š

**Step 1: åŸºæœ¬ç·¨ - ãŠã™ã™ã‚ãƒ©ãƒ¼ãƒ¡ãƒ³ç´¹ä»‹ MCP**

- MCP ã‚µãƒ¼ãƒãƒ¼ã®åŸºæœ¬æ§‹é€ ã‚’ç†è§£
- ãƒ„ãƒ¼ãƒ«ï¼ˆToolï¼‰ã®å®Ÿè£…æ–¹æ³•ã‚’å­¦ç¿’
- Claude Code ã¨ã®é€£æºã‚’ä½“é¨“

**Step 2: å¿œç”¨ç·¨ - Slack é€£æº MCP**

- å¤–éƒ¨ API ã¨ã®é€£æºæ–¹æ³•ã‚’ç¿’å¾—
- ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ã£ãŸè¨­å®šç®¡ç†
- è¤‡æ•°ãƒ„ãƒ¼ãƒ«ã®å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

### ğŸ“‹ å‰ææ¡ä»¶

- **Node.js 20** ä»¥ä¸Š
- **TypeScript** ã®åŸºæœ¬çŸ¥è­˜
- **MCP** ã«ã¤ã„ã¦ã®åŸºç¤ç†è§£

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

Duration: 0:03:00

### ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

ã¾ãšã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«æº–å‚™ã—ã¾ã™ã€‚

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/7tsuno/hands-on-mcp.git
cd hands-on-mcp
```

### ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# Node.js ã®ç¢ºèªï¼ˆ20ä»¥ä¸ŠãŒå¿…è¦ï¼‰
node --version

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
hands-on-mcp/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts             # å®Ÿè£…ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ solutions/           # è§£ç­”ä¾‹
â”‚       â”œâ”€â”€ step1/
â”‚       â””â”€â”€ step2/
â”œâ”€â”€ docs/                    # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â””â”€â”€ package.json
```

### ğŸ’¡ è©°ã¾ã£ãŸã‚‰

å®Ÿè£…ã«è©°ã¾ã£ãŸæ™‚ã¯ `src/solutions/` é…ä¸‹ã«è§£ç­”ä¾‹ãŒã‚ã‚‹ã®ã§å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚

## Step 1: ãƒ©ãƒ¼ãƒ¡ãƒ³æ¨è–¦ MCP ã®æ¦‚è¦

Duration: 0:02:00

### ğŸœ Step 1 ã§ä½œã‚‹ã‚‚ã®

æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€ã‚·ãƒ³ãƒ—ãƒ«ãª MCP ã‚µãƒ¼ãƒãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚

> **æŒ‡å®šã—ãŸå‘³ï¼ˆã—ã‚‡ã†ã‚†ï¼ã¿ãï¼ã—ãŠï¼‰ã«å¿œã˜ã¦ã€ãŠã™ã™ã‚ã®ãƒ©ãƒ¼ãƒ¡ãƒ³å±‹ã‚’è¿”ã™ãƒ„ãƒ¼ãƒ«**

### ğŸ¯ Step 1 ã®å­¦ç¿’ç›®æ¨™

- MCP ã‚µãƒ¼ãƒãƒ¼ã®åŸºæœ¬çš„ãªæ§‹é€ ã‚’ç†è§£ã™ã‚‹
- `registerTool` ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ„ãƒ¼ãƒ«ã‚’ç™»éŒ²ã™ã‚‹æ–¹æ³•ã‚’å­¦ã¶
- zod ã‚’ä½¿ã£ãŸå¼•æ•°ã®ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã‚’ç¿’å¾—ã™ã‚‹
- Claude Code ã¨ã®åŸºæœ¬çš„ãªé€£æºæ–¹æ³•ã‚’ä½“é¨“ã™ã‚‹

### ğŸ’» å‹•ä½œã‚¤ãƒ¡ãƒ¼ã‚¸

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ Claude Code ã§ã€ŒãŠã™ã™ã‚ã®é†¤æ²¹ãƒ©ãƒ¼ãƒ¡ãƒ³ã‚’æ•™ãˆã¦ã€ã¨å…¥åŠ›ã™ã‚‹ã¨ã€
MCP ã‚µãƒ¼ãƒãƒ¼ã®ãƒ„ãƒ¼ãƒ«ãŒå‘¼ã³å‡ºã•ã‚Œã€ã€Œã»ã‚“ç”°ï¼ˆæ±äº¬ãƒ»ç§‹è‘‰åŸï¼‰ã€ã¨ã„ã†å›ç­”ãŒè¿”ã£ã¦ãã¾ã™ã€‚

### ğŸ“ å®Ÿè£…ã®æµã‚Œ

1. å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
2. MCP ã‚µãƒ¼ãƒãƒ¼ã®åˆæœŸåŒ–
3. ãŠã™ã™ã‚ãƒ©ãƒ¼ãƒ¡ãƒ³ç´¹ä»‹ MCP ã®å®Ÿè£…
4. ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•å‡¦ç†
5. å‹•ä½œç¢ºèªã¨ Claude Code é€£æº

## Step 1: ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨åˆæœŸåŒ–

Duration: 0:03:00

### ğŸ“ ä½œæ¥­ãƒ•ã‚¡ã‚¤ãƒ«

`src/index.ts` ã‚’ç·¨é›†ã—ã¦ MCP ã‚µãƒ¼ãƒãƒ¼ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚

### å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

`src/index.ts` ã«ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã—ã¾ã™ï¼š

```typescript
import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";
import { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";
import { z } from "zod";
```

### ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®èª¬æ˜

**`McpServer`**

- MCP ã‚µãƒ¼ãƒãƒ¼ã®æœ¬ä½“ã‚¯ãƒ©ã‚¹
- ãƒ„ãƒ¼ãƒ«ã®ç™»éŒ²ã‚„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã®é€šä¿¡ã‚’ç®¡ç†

**`StdioServerTransport`**

- æ¨™æº–å…¥å‡ºåŠ›ï¼ˆstdin/stdoutï¼‰ã§é€šä¿¡ã™ã‚‹ãŸã‚ã®ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆ
- JSON-RPC ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚„ã‚Šå–ã‚Šã‚’å‡¦ç†

**`zod`**

- å¼•æ•°ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- å‹å®‰å…¨æ€§ã‚’ä¿è¨¼ã—ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚è‡ªå‹•ã§è¡Œã†

### ã‚µãƒ¼ãƒãƒ¼ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆ

ç¶šã‘ã¦ã€MCP ã‚µãƒ¼ãƒãƒ¼ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã¾ã™ï¼š

```typescript
const server = new McpServer({
  name: "step1",
  version: "1.0.0",
});
```

ğŸ’¡ **ãƒã‚¤ãƒ³ãƒˆ**:

- `name` ã¯ã‚µãƒ¼ãƒãƒ¼ã®è­˜åˆ¥åï¼ˆClaude Code ã§è¡¨ç¤ºã•ã‚Œã‚‹ï¼‰
- `version` ã¯äº’æ›æ€§ç®¡ç†ã®ãŸã‚ã«é‡è¦

## Step 1: ãŠã™ã™ã‚ãƒ©ãƒ¼ãƒ¡ãƒ³ç´¹ä»‹ MCP ã®å®Ÿè£…

Duration: 0:05:00

### ãƒ„ãƒ¼ãƒ«ã®ç™»éŒ²

`registerTool` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ãƒ„ãƒ¼ãƒ«ã‚’ç™»éŒ²ã—ã¾ã™ï¼š

```typescript
server.registerTool(
  "get-ramen-recommendation",
  {
    title: "ãƒ©ãƒ¼ãƒ¡ãƒ³å±‹ãŠã™ã™ã‚",
    description: "æŒ‡å®šã•ã‚ŒãŸå‘³ã«å¿œã˜ãŸãŠã™ã™ã‚ã®ãƒ©ãƒ¼ãƒ¡ãƒ³å±‹ã‚’è¿”ã—ã¾ã™",
    inputSchema: {
      flavor: z
        .enum(["ã—ã‚‡ã†ã‚†", "ã¿ã", "ã—ãŠ"])
        .describe("ãƒ©ãƒ¼ãƒ¡ãƒ³ã®å‘³ã®ç¨®é¡"),
    },
  },
  async ({ flavor }) => {
    const recommendations: Record<string, string> = {
      ã—ã‚‡ã†ã‚†: "ã»ã‚“ç”°ï¼ˆæ±äº¬ãƒ»ç§‹è‘‰åŸï¼‰",
      ã¿ã: "å‘³å™Œã£å­ ãµã£ãï¼ˆæ±äº¬ãƒ»è»çªªï¼‰",
      ã—ãŠ: "Ramen FeeL (æ±äº¬ãƒ»é’æ¢…)",
    };

    const name = recommendations[flavor];

    return {
      content: [
        {
          type: "text",
          text: `${flavor}ãƒ©ãƒ¼ãƒ¡ãƒ³ãªã‚‰ã€Œ${name}ã€ãŒãŠã™ã™ã‚ã§ã™ï¼`,
        },
      ],
    };
  }
);
```

### ãƒ„ãƒ¼ãƒ«å®šç¾©ã®ãƒã‚¤ãƒ³ãƒˆ

**1. ãƒ„ãƒ¼ãƒ«åï¼ˆç¬¬ 1 å¼•æ•°ï¼‰**

- `"get-ramen-recommendation"` - ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªè­˜åˆ¥å­

**2. ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆç¬¬ 2 å¼•æ•°ï¼‰**

- `title`: UI ã«è¡¨ç¤ºã•ã‚Œã‚‹åå‰
- `description`: AI ãŒãƒ„ãƒ¼ãƒ«é¸æŠæ™‚ã«å‚ç…§
- `inputSchema`: zod ã§å¼•æ•°ã‚’å®šç¾©

**3. ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ï¼ˆç¬¬ 3 å¼•æ•°ï¼‰**

- éåŒæœŸé–¢æ•°ã§ãƒ„ãƒ¼ãƒ«ã®å‡¦ç†ã‚’å®Ÿè£…
- å¼•æ•°ã¯ inputSchema ã§å®šç¾©ã—ãŸå‹ãŒæ¸¡ã•ã‚Œã‚‹
- æˆ»ã‚Šå€¤ã¯ `content` é…åˆ—ã§è¿”ã™

## Step 1: ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•å‡¦ç†

Duration: 0:03:00

### èµ·å‹•å‡¦ç†ã®å®Ÿè£…

æœ€å¾Œã«ã€ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•å‡¦ç†ã‚’å®Ÿè£…ã—ã¾ã™ï¼š

```typescript
async function main() {
  const transport = new StdioServerTransport();
  await server.connect(transport);
  console.error("ğŸœ ramen-server running via stdio");
}

main().catch((err) => {
  console.error("Fatal error:", err);
  process.exit(1);
});
```

### é‡è¦ãªæ³¨æ„äº‹é …

âš ï¸ **console.log ã¯ä½¿ç”¨ç¦æ­¢ï¼**

MCP ã‚µãƒ¼ãƒãƒ¼ã¯æ¨™æº–å‡ºåŠ›ï¼ˆstdoutï¼‰ã‚’é€šä¿¡ã«ä½¿ç”¨ã™ã‚‹ãŸã‚ï¼š

- ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ã¯å¿…ãš `console.error()` ã‚’ä½¿ç”¨
- `console.log()` ã‚’ä½¿ã†ã¨é€šä¿¡ãŒå£Šã‚Œã¦ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹

### ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜

1. **ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆã®ä½œæˆ**: æ¨™æº–å…¥å‡ºåŠ›ã§é€šä¿¡ã™ã‚‹ãŸã‚ã®è¨­å®š
2. **ã‚µãƒ¼ãƒãƒ¼ã¸ã®æ¥ç¶š**: ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
3. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: èµ·å‹•å¤±æ•—æ™‚ã¯é©åˆ‡ã«çµ‚äº†

### ğŸ’¾ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜

ã“ã“ã¾ã§ã®å®Ÿè£…ã‚’ä¿å­˜ã—ã¦ãã ã•ã„ã€‚æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã§å‹•ä½œç¢ºèªã‚’è¡Œã„ã¾ã™ã€‚

## Step 1: JSON-RPC ã«ã¤ã„ã¦

Duration: 0:01:00

MCP ã‚µãƒ¼ãƒãƒ¼ã¨ã¯ JSON-RPC ã‚’ä½¿ã£ã¦æ¨™æº–å…¥å‡ºåŠ›ã§ã‚„ã‚Šå–ã‚Šã‚’ã—ã¾ã™ã€‚

### JSON-RPC ã¨ã¯ï¼Ÿ

JSON ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ä½¿ã£ãŸã‚·ãƒ³ãƒ—ãƒ«ãªãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€‚

### åŸºæœ¬

- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒã‚µãƒ¼ãƒãƒ¼ã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™ä»•çµ„ã¿
- ãƒ‡ãƒ¼ã‚¿ã®ã‚„ã‚Šå–ã‚Šã¯ã™ã¹ã¦ JSON å½¢å¼
- `method`ï¼ˆãƒ¡ã‚½ãƒƒãƒ‰åï¼‰ã€`params`ï¼ˆå¼•æ•°ï¼‰ã€`id`ï¼ˆè­˜åˆ¥å­ï¼‰ãªã©ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæ±ºã¾ã£ã¦ã„ã‚‹

### ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹

```json
{
  "method": "getWeather",
  "params": { "city": "Tokyo" },
  "id": 1
}
```

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹

```json
{
  "result": { "temperature": 30, "weather": "sunny" },
  "id": 1
}
```

## Step 1: å‹•ä½œç¢ºèªï¼ˆREPLï¼‰

Duration: 0:02:00

### REPL ã§ã®å‹•ä½œãƒ†ã‚¹ãƒˆ

å®Ÿè£…ã—ãŸã‚µãƒ¼ãƒãƒ¼ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹ã€REPLï¼ˆå¯¾è©±ãƒ¢ãƒ¼ãƒ‰ï¼‰ã§ç¢ºèªã—ã¾ã™ã€‚

### ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œï¼š

```bash
npm run dev
```

ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°èµ·å‹•æˆåŠŸã§ã™ï¼š

```
ğŸœ ramen-server running via stdio
```

### ãƒ„ãƒ¼ãƒ«ä¸€è¦§ã®ç¢ºèª

MCP ã‚µãƒ¼ãƒãƒ¼ã¨ã¯ã€æ¨™æº–å…¥å‡ºåŠ›ã§ JSON-RPC ã‚’ä»‹ã—ã¦ã‚„ã‚Šå–ã‚Šã‚’ã—ã¾ã™ã€‚

åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã¯é–‹ã‹ãšã€**åŒã˜ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«**ä»¥ä¸‹ã® JSON ã‚’è²¼ã‚Šä»˜ã‘ã¦ Enterï¼š

```
{ "jsonrpc": "2.0", "id": 1, "method": "tools/list", "params": {} }
```

æ­£å¸¸ãªå¿œç­”ä¾‹ï¼š

```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "result": {
    "tools": [
      {
        "name": "get-ramen-recommendation",
        "title": "ãƒ©ãƒ¼ãƒ¡ãƒ³å±‹ãŠã™ã™ã‚",
        "description": "æŒ‡å®šã•ã‚ŒãŸå‘³ã«å¿œã˜ãŸãŠã™ã™ã‚ã®ãƒ©ãƒ¼ãƒ¡ãƒ³å±‹ã‚’è¿”ã—ã¾ã™"
      }
    ]
  }
}
```

### ãƒ„ãƒ¼ãƒ«ã®å®Ÿè¡Œãƒ†ã‚¹ãƒˆ

ç¶šã‘ã¦ã€ãŠã™ã™ã‚ãƒ©ãƒ¼ãƒ¡ãƒ³ç´¹ä»‹ MCP ã‚’å‘¼ã³å‡ºã—ã¦ã¿ã¾ã™ï¼š

```
{"jsonrpc": "2.0","id": 2,"method": "tools/call","params": {"name": "get-ramen-recommendation", "arguments": { "flavor": "ã—ã‚‡ã†ã‚†" }}}
```

æœŸå¾…ã•ã‚Œã‚‹å¿œç­”ï¼š

```json
{
  "jsonrpc": "2.0",
  "id": 2,
  "result": {
    "content": [
      {
        "type": "text",
        "text": "ã—ã‚‡ã†ã‚†ãƒ©ãƒ¼ãƒ¡ãƒ³ãªã‚‰ã€Œã»ã‚“ç”°ï¼ˆæ±äº¬ãƒ»ç§‹è‘‰åŸï¼‰ã€ãŒãŠã™ã™ã‚ã§ã™ï¼"
      }
    ]
  }
}
```

### çµ‚äº†æ–¹æ³•

ãƒ†ã‚¹ãƒˆãŒå®Œäº†ã—ãŸã‚‰ `Ctrl + C` ã§ã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢ã—ã¾ã™ã€‚

## Step 1: Claude Code ã¸ã®ç™»éŒ²

Duration: 0:04:00

### ãƒ“ãƒ«ãƒ‰

TypeScript ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦å®Ÿè¡Œå¯èƒ½ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ï¼š

```bash
npm run build
```

ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹ã¨ `dist/index.js` ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

### å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’å–å¾—

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ãƒ«ãƒ‘ã‚¹ã‚’å–å¾—ï¼š

```bash
npm run path
```

å‡ºåŠ›ä¾‹ï¼š

```
/Users/username/Projects/hands-on-mcp/dist/index.js
```

ã“ã®ãƒ‘ã‚¹ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãŠãã¾ã™ã€‚

### Claude Code ã«ç™»éŒ²

å–å¾—ã—ãŸãƒ‘ã‚¹ã‚’ä½¿ã£ã¦ MCP ã‚µãƒ¼ãƒãƒ¼ã‚’ç™»éŒ²ï¼š

```bash
claude mcp add step1 -s project {ã‚³ãƒ”ãƒ¼ã—ãŸãƒ‘ã‚¹}
```

å®Ÿéš›ã®ã‚³ãƒãƒ³ãƒ‰ä¾‹ï¼š

```bash
claude mcp add step1 -s project /Users/username/Projects/hands-on-mcp/dist/index.js
```

### ç™»éŒ²ã®ç¢ºèª

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« `.mcp.json` ãŒä½œæˆã•ã‚Œã¾ã™ï¼š

```bash
cat .mcp.json
```

### âš ï¸ æ³¨æ„äº‹é …

- ãƒ‘ã‚¹ã¯**ãƒ•ãƒ«ãƒ‘ã‚¹**ã§æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™

## Step 1: Claude Code ã§ã®å‹•ä½œç¢ºèª

Duration: 0:03:00

### Claude Code ã®å†èµ·å‹•

MCP ã‚µãƒ¼ãƒãƒ¼ã‚’ç™»éŒ²ã—ãŸã‚‰ã€Claude Code ã‚’å†èµ·å‹•ã—ã¾ã™ï¼š

1. Claude Code ã‚’å®Œå…¨ã«çµ‚äº†
2. å†åº¦ Claude Code ã‚’èµ·å‹•
3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã

### å‹•ä½œãƒ†ã‚¹ãƒˆ

Claude Code ã®ãƒãƒ£ãƒƒãƒˆã«ä»¥ä¸‹ã‚’å…¥åŠ›ï¼š

```
ãŠã™ã™ã‚ã®é†¤æ²¹ãƒ©ãƒ¼ãƒ¡ãƒ³ã®ãŠåº—ã‚’æ•™ãˆã¦
```

æœŸå¾…ã•ã‚Œã‚‹å¿œç­”ï¼š

> ã—ã‚‡ã†ã‚†ãƒ©ãƒ¼ãƒ¡ãƒ³ãªã‚‰ã€Œã»ã‚“ç”°ï¼ˆæ±äº¬ãƒ»ç§‹è‘‰åŸï¼‰ã€ãŒãŠã™ã™ã‚ã§ã™ï¼

### ä»–ã®å‘³ã‚‚è©¦ã—ã¦ã¿ã‚‹

```
å‘³å™Œãƒ©ãƒ¼ãƒ¡ãƒ³ã§ãŠã™ã™ã‚ã¯ï¼Ÿ
```

```
å¡©ãƒ©ãƒ¼ãƒ¡ãƒ³ã®ç¾å‘³ã—ã„ãŠåº—ã‚’çŸ¥ã‚ŠãŸã„
```

### MCP ãƒ„ãƒ¼ãƒ«ã®ç¢ºèª

Claude Code ã§ `/mcp` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã®è©³ç´°ã‚’ç¢ºèªã§ãã¾ã™ï¼š

- ãƒ„ãƒ¼ãƒ«å
- èª¬æ˜
- å¼•æ•°ã®ã‚¹ã‚­ãƒ¼ãƒ

### ğŸ‰ Step 1 å®Œäº†ï¼

ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼æœ€åˆã® MCP ã‚µãƒ¼ãƒãƒ¼ãŒå®Œæˆã—ã¾ã—ãŸã€‚

æ¬¡ã¯ Step 2 ã§ã€ã‚ˆã‚Šå®Ÿè·µçš„ãª Slack é€£æºã‚µãƒ¼ãƒãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚

## Step 2: Slack é€£æºã‚µãƒ¼ãƒãƒ¼ã®æ¦‚è¦

Duration: 0:03:00

### ğŸ”— Step 2 ã§ä½œã‚‹ã‚‚ã®

Step 2 ã§ã¯ã€å®Ÿç”¨çš„ãªå¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æºã‚’å­¦ã³ã¾ã™ã€‚

> **Slack ã¨é€£æºã—ã¦ã€ã‚¹ãƒ¬ãƒƒãƒ‰ã®å–å¾—ã‚„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¤œç´¢ãŒã§ãã‚‹ MCP ã‚µãƒ¼ãƒãƒ¼**

### ğŸ¯ å®Ÿè£…ã™ã‚‹ 3 ã¤ã®ãƒ„ãƒ¼ãƒ«

1. **Slack ã‚¹ãƒ¬ãƒƒãƒ‰å–å¾—**

   - URL ã‹ã‚‰å…¨ã¦ã®è¿”ä¿¡ã‚’å–å¾—
   - ã‚¹ãƒ¬ãƒƒãƒ‰ã®å†…å®¹ã‚’æ™‚ç³»åˆ—ã§æ•´ç†

2. **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¤œç´¢**

   - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¤œç´¢
   - æ¤œç´¢çµæœã‚’è¦‹ã‚„ã™ãæ•´å½¢

3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ ID ã‹ã‚‰è©³ç´°æƒ…å ±ã‚’å–å¾—
   - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’æ§‹é€ åŒ–ã—ã¦è¿”ã™

### ğŸ’¡ å®Ÿè·µçš„ãªä½¿ç”¨ä¾‹

- Slack ã‚¹ãƒ¬ãƒƒãƒ‰ã®å†…å®¹ã‚’è¦ç´„ã—ã¦ GitHub Issue ã‚’ä½œæˆ
- ç‰¹å®šã®æŠ€è¡“ã«è©³ã—ã„äººã‚’ Slack ã‹ã‚‰æ¢ã™
- éå»ã®è­°è«–ã‚’æ¤œç´¢ã—ã¦å‚ç…§

æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ Slack App ã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚

## Step 2: Slack App ã®è¨­å®š

Duration: 0:05:00

### Slack App ã®ä½œæˆ

1. [Slack API](https://api.slack.com/apps) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. **Create New App** ã‚’ã‚¯ãƒªãƒƒã‚¯
3. **From Scratch** ã‚’é¸æŠ
4. ã‚¢ãƒ—ãƒªåï¼ˆä¾‹ï¼šMCP Hands-onï¼‰ã¨ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’è¨­å®š

### OAuth ã‚¹ã‚³ãƒ¼ãƒ—ã®è¨­å®š

å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ **OAuth & Permissions** ã‚’é¸æŠã—ã€ä»¥ä¸‹ã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’è¿½åŠ ï¼š

**User Token Scopes ã«è¿½åŠ ã™ã‚‹ã‚¹ã‚³ãƒ¼ãƒ—ï¼š**

| ã‚¹ã‚³ãƒ¼ãƒ—           | èª¬æ˜                                       |
| ------------------ | ------------------------------------------ |
| `channels:history` | ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒãƒ£ãƒ³ãƒãƒ«ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸èª­ã¿å–ã‚Š   |
| `groups:history`   | ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒãƒ£ãƒ³ãƒãƒ«ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸èª­ã¿å–ã‚Š |
| `im:history`       | DM ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸èª­ã¿å–ã‚Š                    |
| `mpim:history`     | ã‚°ãƒ«ãƒ¼ãƒ— DM ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸èª­ã¿å–ã‚Š           |
| `search:read`      | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¤œç´¢                             |
| `users:read`       | ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®èª­ã¿å–ã‚Š                     |

### ã‚¢ãƒ—ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

1. **Install to Workspace** ã‚’ã‚¯ãƒªãƒƒã‚¯
2. æ¨©é™ã‚’ç¢ºèªã—ã¦ **è¨±å¯ã™ã‚‹**
3. **User OAuth Token** (xoxp-ã§å§‹ã¾ã‚‹) ã‚’ã‚³ãƒ”ãƒ¼

### ğŸ” ãƒˆãƒ¼ã‚¯ãƒ³ã®ä¿ç®¡

å–å¾—ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã¯å®‰å…¨ã«ä¿ç®¡ã—ã¦ãã ã•ã„ã€‚
å¾Œã§ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦ä½¿ç”¨ã—ã¾ã™ã€‚

âš ï¸ **é‡è¦**:

- Slack ãƒˆãƒ¼ã‚¯ãƒ³ã¯çµ¶å¯¾ã« GitHub ãªã©ã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„

## Step 2: åŸºæœ¬å®Ÿè£…

Duration: 0:04:00

### Step 1 ã®ã‚³ãƒ¼ãƒ‰ã‚’ãƒ™ãƒ¼ã‚¹ã«æ‹¡å¼µ

Step 1 ã®ãƒ©ãƒ¼ãƒ¡ãƒ³ãƒ„ãƒ¼ãƒ«ã¯å‰Šé™¤ã—ã¾ã™ã€‚
`src/index.ts` ã‚’ç·¨é›†ã—ã¦ã€ç©ºã«ã—ãŸå¾Œã€Step 2 ã®å®Ÿè£…ã‚’å§‹ã‚ã¾ã™ã€‚

### ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

```typescript
import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";
import { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";
import { z } from "zod";
import { WebClient } from "@slack/web-api";
```

### Slack ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®åˆæœŸåŒ–

```typescript
// Slack APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®åˆæœŸåŒ–
const slack = new WebClient(process.env.SLACK_USER_TOKEN);

const server = new McpServer({
  name: "step2",
  version: "1.0.0",
});
```

### ã‚µãƒ¼ãƒãƒ¼èµ·å‹•å‡¦ç†ï¼ˆç’°å¢ƒå¤‰æ•°ãƒã‚§ãƒƒã‚¯ä»˜ãï¼‰

```typescript
async function main() {
  if (!process.env.SLACK_USER_TOKEN) {
    console.error("ã‚¨ãƒ©ãƒ¼: SLACK_USER_TOKENãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“");
    process.exit(1);
  }

  const transport = new StdioServerTransport();
  await server.connect(transport);
  console.error("ğŸ’¬ slack-server running via stdio");
}

main().catch((err) => {
  console.error("Fatal error:", err);
  process.exit(1);
});
```

### ç’°å¢ƒå¤‰æ•°ã®é‡è¦æ€§

- Slack ãƒˆãƒ¼ã‚¯ãƒ³ã¯ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†
- ã‚³ãƒ¼ãƒ‰ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã—ãªã„ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šé‡è¦ï¼‰
- `.mcp.json` ã§ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šå¯èƒ½

## Step 2: ã‚¹ãƒ¬ãƒƒãƒ‰å–å¾—ãƒ„ãƒ¼ãƒ«ã®å®Ÿè£…

Duration: 0:05:00

### ã‚¹ãƒ¬ãƒƒãƒ‰ URL ã®è§£æã¨å–å¾—

æœ€åˆã®ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã€Slack ã‚¹ãƒ¬ãƒƒãƒ‰ã® URL ã‹ã‚‰ä¼šè©±ã‚’å–å¾—ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè£…ã—ã¾ã™ï¼š

```typescript
server.registerTool(
  "get-slack-thread",
  {
    title: "Slackã‚¹ãƒ¬ãƒƒãƒ‰å–å¾—",
    description: "Slackã‚¹ãƒ¬ãƒƒãƒ‰ã®URLã‹ã‚‰å…¨ã¦ã®è¿”ä¿¡ã‚’å–å¾—ã—ã¾ã™",
    inputSchema: {
      thread_url: z.string().describe("Slackã‚¹ãƒ¬ãƒƒãƒ‰ã®URL"),
    },
  },
  async ({ thread_url }) => {
    // URLã‹ã‚‰ãƒãƒ£ãƒ³ãƒãƒ«IDã¨ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’æŠ½å‡º
    const urlParts = thread_url.match(
      /https:\/\/[^\/]+\.slack\.com\/archives\/([^\/]+)\/p(\d+)(\d{6})?/
    );

    if (!urlParts) {
      throw new Error("ç„¡åŠ¹ãªSlackã‚¹ãƒ¬ãƒƒãƒ‰URLã§ã™");
    }

    const channelId = urlParts[1];
    const timestamp = `${urlParts[2].slice(0, 10)}.${urlParts[2].slice(10)}`;

    // Slack APIã§ã‚¹ãƒ¬ãƒƒãƒ‰ã®è¿”ä¿¡ã‚’å–å¾—
    const result = await slack.conversations.replies({
      channel: channelId,
      ts: timestamp,
    });

    return {
      content: [
        {
          type: "text",
          text: JSON.stringify(
            {
              channel: channelId,
              thread_ts: timestamp,
              messages: result.messages,
              total_messages: result.messages?.length || 0,
            },
            null,
            2
          ),
        },
      ],
    };
  }
);
```

### å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ

**URL ãƒ‘ãƒ¼ã‚¹**

- æ­£è¦è¡¨ç¾ã§ Slack URL ã‹ã‚‰ãƒãƒ£ãƒ³ãƒãƒ« ID ã¨ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’æŠ½å‡º
- URL å½¢å¼: `https://xxx.slack.com/archives/C1234567890/p1234567890123456`

**ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—å¤‰æ›**

- URL ã® `p1234567890123456` â†’ API ã® `1234567890.123456`

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**

- ç„¡åŠ¹ãª URLã€æ¨©é™ã‚¨ãƒ©ãƒ¼ã€ã‚¹ãƒ¬ãƒƒãƒ‰ä¸åœ¨ã‚’é©åˆ‡ã«å‡¦ç†

## Step 2: æ¤œç´¢ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãƒ„ãƒ¼ãƒ«ã®å®Ÿè£…

Duration: 0:05:00

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¤œç´¢ãƒ„ãƒ¼ãƒ«

2 ã¤ç›®ã®ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¤œç´¢æ©Ÿèƒ½ã‚’å®Ÿè£…ï¼š

```typescript
sserver.registerTool(
  "search-slack-messages",
  {
    title: "Slackãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¤œç´¢",
    description: "Slackãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¤œç´¢ã—ã¦çµæœã‚’å–å¾—ã—ã¾ã™",
    inputSchema: {
      query: z.string().describe("æ¤œç´¢ã‚¯ã‚¨ãƒª"),
      limit: z.number().optional().default(20).describe("å–å¾—ã™ã‚‹æœ€å¤§ä»¶æ•°"),
    },
  },
  async ({ query, limit }) => {
    // Slack APIã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¤œç´¢
    const result = await slack.search.messages({
      query: query,
      count: limit,
    });

    return {
      content: [
        {
          type: "text",
          text: JSON.stringify(
            {
              query: query,
              messages: result.messages?.matches || [],
              total_results: result.messages?.total || 0,
            },
            null,
            2
          ),
        },
      ],
    };
  }
);
```

### ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—ãƒ„ãƒ¼ãƒ«

3 ã¤ç›®ã®ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—æ©Ÿèƒ½ã‚’å®Ÿè£…ï¼š

```typescript
server.registerTool(
  "get-slack-user",
  {
    title: "Slackãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—",
    description: "Slackãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‹ã‚‰è©³ç´°ãªãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã—ã¾ã™",
    inputSchema: {
      user_id: z.string().describe("Slackãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆä¾‹: U1234567890ï¼‰"),
    },
  },
  async ({ user_id }) => {
    try {
      // Slack APIã§ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—
      const result = await slack.users.info({
        user: user_id,
      });

      if (!result.user) {
        throw new Error("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ");
      }

      const user = result.user;

      return {
        content: [
          {
            type: "text",
            text: JSON.stringify(
              {
                id: user.id,
                name: user.name,
                real_name: user.real_name,
                display_name: user.profile?.display_name || user.name,
                email: user.profile?.email,
                title: user.profile?.title,
                status_text: user.profile?.status_text,
                status_emoji: user.profile?.status_emoji,
                is_bot: user.is_bot,
                is_admin: user.is_admin,
                is_owner: user.is_owner,
                avatar_url: user.profile?.image_512 || user.profile?.image_192,
                timezone: user.tz,
              },
              null,
              2
            ),
          },
        ],
      };
    } catch (error: any) {
      throw new Error(`ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ: ${error.message}`);
    }
  }
);
```

## Step 2: å‹•ä½œç¢ºèªã¨ Claude Code é€£æº

Duration: 0:04:00

### REPL ã§ã®å‹•ä½œç¢ºèª

ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ï¼š

```bash
SLACK_USER_TOKEN="xoxp-your-token" npm run dev
```

ãƒ„ãƒ¼ãƒ«ä¸€è¦§ã®ç¢ºèªï¼š

```json
{ "jsonrpc": "2.0", "id": 1, "method": "tools/list", "params": {} }
```

### ãƒ“ãƒ«ãƒ‰ã¨ Claude Code ã¸ã®ç™»éŒ²

```bash
# ãƒ“ãƒ«ãƒ‰
npm run build

# ãƒ‘ã‚¹ã‚’å–å¾—
npm run path

# ç’°å¢ƒå¤‰æ•°ä»˜ãã§ç™»éŒ²
claude mcp add step2 -s project {ãƒ‘ã‚¹} \
  -e SLACK_USER_TOKEN="xoxp-your-token"
```

### å®Ÿè·µçš„ãªä½¿ã„æ–¹

Claude Code ã§ä»¥ä¸‹ã®ã‚ˆã†ãªä½¿ã„æ–¹ãŒã§ãã¾ã™ï¼š

**ã‚¹ãƒ¬ãƒƒãƒ‰ã®è¦ç´„ï¼š**

```
ã“ã®Slackã‚¹ãƒ¬ãƒƒãƒ‰ã®å†…å®¹ã‚’è¦ç´„ã—ã¦ã€è­°è«–ã•ã‚Œã¦ã„ã‚‹èª²é¡Œã«ã¤ã„ã¦GitHub Issueã‚’ä½œæˆã—ã¦ï¼š
https://example.slack.com/archives/C1234567890/p1234567890123456
```

**ç‰¹å®šã®è©±é¡Œã«è©³ã—ã„äººã‚’æ¢ã™ï¼š**

```
MCPã«ã¤ã„ã¦è©³ã—ãçŸ¥ã‚ŠãŸã„ã€‚Slackã§æ¤œç´¢ã—ã¦MCPã«ã¤ã„ã¦ã‚ˆãè¨€åŠã—ã¦ã„ã‚‹äººã‚’æ¢ã—ã¦
```

**ãƒã‚°ãƒ¬ãƒãƒ¼ãƒˆã®èª¿æŸ»ï¼š**

```
Slackã§ã€Œã‚¨ãƒ©ãƒ¼ã€ã€Œãƒã‚°ã€ã€Œä¸å…·åˆã€ã‚’æ¤œç´¢ã—ã¦ã€æœ€è¿‘å ±å‘Šã•ã‚Œã¦ã„ã‚‹å•é¡Œã‚’ã¾ã¨ã‚ã¦
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

Duration: 0:03:00

### ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³•

| ã‚¨ãƒ©ãƒ¼                     | åŸå›                  | è§£æ±ºæ–¹æ³•                             |
| -------------------------- | -------------------- | ------------------------------------ |
| `console.log` ã§é€šä¿¡ã‚¨ãƒ©ãƒ¼ | æ¨™æº–å‡ºåŠ›ã®ç«¶åˆ       | `console.error` ã‚’ä½¿ç”¨               |
| `not_in_channel`           | ãƒãƒ£ãƒ³ãƒãƒ«æœªå‚åŠ      | ãƒˆãƒ¼ã‚¯ãƒ³ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒãƒ£ãƒ³ãƒãƒ«ã«å‚åŠ  |
| `missing_scope`            | æ¨©é™ä¸è¶³             | Slack App ã§å¿…è¦ãªã‚¹ã‚³ãƒ¼ãƒ—ã‚’è¿½åŠ      |
| `invalid_auth`             | ãƒˆãƒ¼ã‚¯ãƒ³ç„¡åŠ¹         | ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å†ç”Ÿæˆã—ã¦ç’°å¢ƒå¤‰æ•°ã‚’æ›´æ–°   |
| `channel_not_found`        | ãƒãƒ£ãƒ³ãƒãƒ« ID é–“é•ã„ | URL ãŒæ­£ã—ã„ã‹ç¢ºèª                   |

### ãƒ‡ãƒãƒƒã‚°ã®ã‚³ãƒ„

**1. REPL ã§ãƒ†ã‚¹ãƒˆ**

- ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ `npm run dev`
- JSON-RPC ã‚’ç›´æ¥é€ä¿¡ã—ã¦å‹•ä½œç¢ºèª

**2. ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®æ´»ç”¨**

```typescript
console.error("Debug:", { channel, timestamp });
```

**3. Slack API ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™**

- å¤§é‡ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯é¿ã‘ã‚‹
- ã‚¨ãƒ©ãƒ¼æ™‚ã¯å°‘ã—å¾…ã£ã¦ãƒªãƒˆãƒ©ã‚¤

### ğŸ“ è§£ç­”ä¾‹ã®ç¢ºèª

ã©ã†ã—ã¦ã‚‚è©°ã¾ã£ãŸå ´åˆï¼š

```bash
# Step 1 ã®è§£ç­”
cat src/solutions/step1/index.ts

# Step 2 ã®è§£ç­”
cat src/solutions/step2/index.ts
```

## ã¾ã¨ã‚

Duration: 0:03:00

### ğŸ‰ å®Œæˆï¼

ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼2 ã¤ã® MCP ã‚µãƒ¼ãƒãƒ¼ã‚’å®Œæˆã•ã›ã¾ã—ãŸã€‚

### ğŸ“š å­¦ã‚“ã ã“ã¨

**Step 1: åŸºæœ¬ç·¨**

- âœ… MCP ã‚µãƒ¼ãƒãƒ¼ã®åŸºæœ¬æ§‹é€ ï¼ˆMcpServer + Transportï¼‰
- âœ… ãƒ„ãƒ¼ãƒ«ã®ç™»éŒ²ã¨å®Ÿè£…ï¼ˆregisterToolï¼‰
- âœ… zod ã«ã‚ˆã‚‹ã‚¹ã‚­ãƒ¼ãƒå®šç¾©
- âœ… Claude Code ã¨ã®åŸºæœ¬çš„ãªé€£æº

**Step 2: å¿œç”¨ç·¨**

- âœ… å¤–éƒ¨ API ã¨ã®é€£æºï¼ˆSlack Web APIï¼‰
- âœ… ç’°å¢ƒå¤‰æ•°ã®ç®¡ç†ï¼ˆprocess.envï¼‰
- âœ… è¤‡æ•°ãƒ„ãƒ¼ãƒ«ã®å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

å­¦ã‚“ã çŸ¥è­˜ã‚’æ´»ã‹ã—ã¦ã€ä»¥ä¸‹ã«æŒ‘æˆ¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

- **GitHub API** ã¨é€£æºã—ã¦ Issue/PR ã‚’æ“ä½œ
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**ã¨æ¥ç¶šã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ **ã‚’æ“ä½œã™ã‚‹ãƒ„ãƒ¼ãƒ«
- **Web ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°**ãƒ„ãƒ¼ãƒ«

### ğŸ“š å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

- [MCP å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://modelcontextprotocol.io/)
- [Claude Code ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.anthropic.com/claude-code)
- [Slack API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://api.slack.com/)
- [zod ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://zod.dev/)

**Happy Coding! ğŸŠ**
